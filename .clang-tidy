# .clang-tidy
---
# Reasonable, modern defaults with explicit naming rules for unified snake_case.
Checks: >
  bugprone-*,
  clang-analyzer-*,
  cppcoreguidelines-*,
  modernize-*,
  performance-*,
  portability-*,
  readability-*,
  hicpp-*,
  llvm-include-cleaner,
  -cppcoreguidelines-avoid-magic-numbers,
  -readability-magic-numbers,
  -cppcoreguidelines-owning-memory,            # we rely on smart pointers; raw new/delete likely hidden
  -cppcoreguidelines-avoid-c-arrays,           # allow C arrays where ABI or perf dictates; adjust if desired
  -hicpp-avoid-c-arrays,
  -hicpp-no-array-decay

WarningsAsErrors: ''
HeaderFilterRegex: '(src/|include/)'
AnalyzeTemporaryDtors: true
FormatStyle: none

CheckOptions:
  # ===== Identifier naming: unified snake_case =====
  - { key: readability-identifier-naming.NamespaceCase,            value: lower_case }
  - { key: readability-identifier-naming.ClassCase,                value: lower_case }
  - { key: readability-identifier-naming.StructCase,               value: lower_case }
  - { key: readability-identifier-naming.EnumCase,                 value: lower_case }
  - { key: readability-identifier-naming.EnumConstantCase,         value: lower_case }
  - { key: readability-identifier-naming.TypeAliasCase,            value: lower_case }
  - { key: readability-identifier-naming.TypedefCase,              value: lower_case }
  - { key: readability-identifier-naming.FunctionCase,             value: lower_case }
  - { key: readability-identifier-naming.MethodCase,               value: lower_case }
  - { key: readability-identifier-naming.VariableCase,             value: lower_case }
  - { key: readability-identifier-naming.GlobalVariableCase,       value: lower_case }
  - { key: readability-identifier-naming.MemberCase,               value: lower_case }
  - { key: readability-identifier-naming.PrivateMemberSuffix,      value: _ }
  - { key: readability-identifier-naming.ProtectedMemberSuffix,    value: _ }
  - { key: readability-identifier-naming.StaticMemberCase,         value: lower_case }
  - { key: readability-identifier-naming.ClassMemberCase,          value: lower_case }
  - { key: readability-identifier-naming.ParameterCase,            value: lower_case }
  - { key: readability-identifier-naming.ConstantCase,             value: lower_case }
  - { key: readability-identifier-naming.ConstexprVariableCase,    value: lower_case }
  - { key: readability-identifier-naming.MacroDefinitionCase,      value: UPPER_CASE }
  # Allow conventional single-letter template parameters like T, U, It...
  - { key: readability-identifier-naming.TemplateParameterCase,    value: CamelCase }
  - { key: readability-identifier-naming.IgnoredRegexp,            value: '^_[A-Z0-9_]+$' }  # allow reserved-like internals if needed

  # ===== Modernize & safety knobs =====
  - { key: modernize-use-trailing-return-type.MinTypeNameLength, value: '5' }
  - { key: modernize-loop-convert.MaxCopySize,                 value: '16' }
  - { key: modernize-loop-convert.NamingStyle,                 value: 'CamelCase' } # only affects suggested var names
  - { key: cppcoreguidelines-non-private-member-variables-in-classes.IgnoreClassesWithAllMemberVariablesBeingPublic, value: 'true' }

  # ===== Include cleaner: enforce minimal includes =====
  - { key: llvm-include-cleaner.IncludeStyle, value: Strict }

  # ===== Braces, narrowing, overrides, etc. =====
  - { key: readability-braces-around-statements.ShortStatementLines, value: '1' }
